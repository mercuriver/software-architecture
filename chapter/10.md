# 레이어드 아키텍처 스타일

- 레이어드 아키텍처(Layered architecture), n티어(n-tier) 아키텍처라고도 불림

- 가장 흔한 아키텍처 스타일 중 하나, 사실상 표준에 가까운 아키텍처

- 단순하고 낮은 비용으로 구성 가능, 프로젝트 시작 시점에 선택하기 좋음

- FE, BE, DBA가 있는 회사의 소통 구조와 전통적인 레이어드 아키텍처는 그 형상이 유사하다(콘웨이의 법칙)

`묵시적 아키텍처(architecture by implication) 안티패턴`, `우발적 아키텍처(accidental architecture) 안티패턴` 등 몇몇 안티패턴 범주에 속한다

> 묵시적 아키텍처(architecture by implication) 안티패턴
>
> 묵시적 아키텍처 안티패턴은 시스템의 구조가 명시적으로 정의되지 않아 유지보수와 확장이 어렵고, 성능 등을 저하시키는 문제다
>
> 대표적으로 "Big ball of mud" 문제가 있다
>
> 레이어드 아키텍처는 시스템을 레이어로 나눠 독립적으로 동작하도록 설계하는 패턴이다. 하지만, 인터페이스를 명확히 정의하지 않으면 묵시적 아키텍처가 되어 유지보수와 확장이 어려워진다. 따라서, 명시적 아키텍처를 위해 인터페이스를 정의하고, 의존성 억제하기 위해 주의해야 한다

> 우발적 아키텍처(accidental architecture) 안티패턴
>
> 우발적 아키텍처 안티패턴은 시스템이 일관성 없이 발전해 문제가 생기는 것을 뜻한다. 이는 명시적인 계획 없이 시스템이 발전되는 것이 원인으로, 일정한 아키텍처 디자인 원칙과 계획을 수립하여 예방할 수 있다
>
> 레이어드 아키텍처는 레이어 간의 인터페이스를 명확하게 정의하지 않는 경우, 우발적 아키텍처가 될 수 있다. 이때 시스템은 묵시적인 구조를 가지게 되어 유지보수와 확장이 어렵고 복잡도가 높아진다

## 10.1 토폴로지

- 도메인 분할 아키텍처의 반대인 기술 분할된 아키텍처다, 즉 컴포넌트를 도메인 단위가 아닌 기술 역할에 따라 묶는다

- 일반적으로 프레젠테이션, 비즈니스, 퍼시스턴스, 데이터베이스의 4개 표준 레이어로 구성된다

- 프레젠테이션, 비즈니스, 퍼시스턴스 레이어를 단일 배포단위로 합한 후 데이터베이스를 분리하는 등 배포를 기준으로 물리적 계층화 관점에서 다양한 토폴로지 변형이 가능하다

- 온프레미스(on-preises) 제품들은 데이터베이스를 내장하거나 인메모리 데이터베스를 사용하여 4계층을 모두 단일 배포 단위로 묶은 형태를 많이 사용한다

- 각 레이어는 주어진 요청을 처리하는데 필요한 업무 위주로 추상화 되어 있다

  - 프레젠테이션 레이어, 모든 유저 인터페이스와 브라우저 통신 로직을 제어한다, 데이터 조회에 대해선 전혀 알 필요가 없고 오직 화면에 표현하는 것에만 집중한다

  - 비즈니스 레이어, 프레젠테이션 레이어로부터 받은 요청을 알맞는 비즈니스 규칙에 맞추어 처리한다. 화면에서 어떻게 데이터를 표현할것인지 전혀 관여하지 않는다

- 관심사의 분리 개념을 적극활용한 아키텍처로, 이러한 개념 덕분에 아키텍처 내부의 역활과 책임이 명확하다

  - 개발자는 본인의 역량을 온전히 도메인 기술에 집중 할 수 있다
  - 변화에 신속하게 반응하는 민첩성은 상대적으로 떨어진다

- 도메인이 모든 레이어에 포함되므로 도메인 변경에 따른 대응이 쉽지 않다
  - 일반적인 케이스로는, 서비스 구현 시 고객 도메인이 프리젠테이션부터 데이터베이스 레이어에까지 모두 포함되어 있다

