# 아키텍처 특성 범위

성능이나 탄력성과 같은 아키텍처 특성을 고려하여 설계하더라도 데이터베이스 등 코드베이스 외부의 의존성은 아키텍처를 통해 특성을 부여할 수 없다

아키텍트는 운영 아키텍처 특성을 잘 따져보고 해당 특성에 영향을 미치는 코드베이스 외부의 컴포넌트를 잘 살펴봐야 한다

이런 의존성을 측정하기 위해 아키텍처 퀀텀이란 용어를 정의했다, 아키텍처 퀀텀을 이해하기위해선 커네이선스라는 핵심 메트릭을 알아야 한다

- 전통적으로 아키텍트는 아키텍처 특성의 범위를 시스템 레벨에 두는것이 당연시되었다
  - 전통적인 시스템은 모놀리식 기반이었기에 문제가 없었다
  - 현대 공학 기술과 마이크로서비스 등 다양한 아키텍처 스타일이 가능해지며 아키텍처 특성의 범위는 세분화된다
- 아키텍처 퀀텀은 아키텍처 특성의 새로운 범위를 제시한다
- 현대 시스템의 아키텍트는 시스템 레벨이 아닌 퀀텀 레벨에서 아키텍처 특성을 정의한다

## 7.1 커플링과 커네이선스

> 커네이선스
>
> 두 컴포넌트 중 한쪽이 변경될 경우 달ㄴ 쪽도 변경해야 전체 시스템의 정합성이 맞는다면 이들은 커네이선스를 갖고 있는 것이다.

구심/원심 커플링 같은 커플링 메트릭은 아키텍처 분석용으로는 너무 세분도(Granularity)가 높아 커네이선스를 사용한다

커네이선스는 정적 코드분석으로 발견 가능한 정적 커네이선스와 런타임 동작에 관한 동적 커네이선스로 분류된다

동적 커네이선스는 동기와 비동기 두 종류로 나뉜다

## 7.2 아키텍처 퀀텀과 세분도

컴포넌트 레벨의 커플링 외에도 비즈니스 개념이 의미상 여러 시스템 파드를 엮어 기능적으로 응집되어 소프트웨어를 구성한다

성공적인 설계, 분석, 발전을 위해서 개발자는 커플링 지점을 모두 살펴봐야 한다

> 아키텍처 퀀텀
>
> `높은 기능 응집도(High functional cohesion)`와 `동기적 커네이선스(Synchronous connascence)`를 가진, `독립적으로 배포 가능한(Independently deployable)` 아티팩트

- 독립적으로 배포 가능

  - 아키텍처 퀀텀은 아키텍처의 다른 파트와 독립적으로 작동되는 모든 필수 컴포넌트를 포함한다
  - 만약 DB 없이 애플리케이션이 동작하지 않는다면 DB까지 퀀텀의 일부다

- 높은 기능 응집도

  - 컴포넌트 설계에 따라 구현된 코드가 얼마나 목적에 맞게 통합되어 있는가를 나타낸다
  - 기능 응집도가 높다는건 아키텍처 퀀텀이 목적에 맞는 역할을 하고 있다는 뜻이다

- 동기적 커네이선스

  - 아키텍처 퀀텀을 형성하는 애플리케이션 콘텍스트 내부 또는 분선 서비스 간 동기 호출을 뜻한다
  - 한쪽이 다른 쪽을 기다린다면 호출하는 도중에는 양쪽의 운영 아키텍처 특성이 동일해야 한다
  - 메시지 큐를 두어 버퍼 역할을 수행하여 비동기 통신을 제공할 경우 커네이선스는 보다 유연해진다

- 경계 콘텍스트(Bounded context)
  - DDD에서 나온 개념
  - 같은 역할을 하는 공통 모듈이라도, 각 문제 도메인이 자체 클래스를 두고 구현을 한 후, 이를 통합하는 지점에서 조정하는 것이 경계 콘텍스트의 개념이다
  - 공통 모듈을 각 도메인에서 사용할 경우 커플링이 강해져 복잡도가 상승한다

## 7.3 사례 연구: GGG

이 문제는 각 파트(도메인) 별로 필요한 아키텍처 특성이 다르다

각 파트를 하나의 아키텍처 퀀텀으로 구성하여 아키텍처 특성의 범위를 제한하며 설계를 진행하자
