# 2 아키텍처 사고

아키텍처 관점에서 사물을 바라보는 것이다

아키텍처 사고는 다음과 같이 크게 네가지다

1. 아키텍처 대 설계

   아키텍처와 설계의 차이를 이해하고 작업을 진행하기 위해선 개발팀과 협력하는 법을 알아야 한다

2. 기술 폭

   기술 깊이를 유지하며 폭넓은 기술 지식을 확보해야 한다

3. 트레이드오프 분석

   솔루션과 기술 간 트레이드오프를 이해하고 분석하고 조율해야 한다

4. 비즈니스 동인의 이해

   비즈니스 동인(Business driver)의 중요성을 이해하고 아키텍처 관심사로 해석한다

## 2.1 아키텍처 대 설계

- 비즈니스와 기술 문제를 해결하기 위해 아키텍처와 설계의 차이점을 이해하고 이 둘을 긴밀하게 통합한 솔루션을 모색하는 것이다
- 비즈니스 요구사항을 분석해서 아키텍처 특성을 도출/정의한다
  - 해당 문제 영역에 가장 적합한 아키텍처 패턴과 스타일을 선택한다
- 일반적으로 아키텍트와 개발자 간에 존재하는 '아키텍트 -> 개발자'의 일방적인 의사소통이 문제다
  - 개발팀에서 개발 중 발생한 아키텍처 변경이 아키텍트에게 전달되는 일은 거의 없다
  - 제대로 된 아키텍처를 만들기 위해선 아키텍처와 개발자 두 팀이 양방향으로 소통하는 관계를 정립해야 한다
- 아키텍처와 설계의 경계는 따로 없다
  - 모두 프로젝트 생명 주기의 일부로 항상 서로 동기화되어야 한다

## 2.2 기술 폭

- 크게 기술 습득 방식은 `기술 깊이`와 `기술 폭`으로 나뉜다
  - 개발자는 업무를 진행하기 위해 기술 깊이를 확보해야 한다
  - 아키텍트는 아키텍처 시각을 유지하기 위해 상당한 기술 폭이 요구된다
- 아키텍트는 기술적인 제약 하에 어떤 기능이 가장 문제 해결에 적합한지 결정해야하기에 폭넓은 지식이 필요하다
- 기술 깊이와 기술 폭 사이에서 균형을 맞추는 일을 항상 신경써야 한다
- 진짜 기술 리스크와 리스크처럼 보이는 기술 리스크의 차이를 이해하도록 노력해야 한다

- 지식은 `내가 알고 있는 것`, `내가 모른다는 사실을 아는 것`, `내가 모른다는 사실조차 모르는 것`으로 분류된다

  - `내가 알고 있는 것`은 계속 시간을 들여 전문성을 유지해야하는 것이다, 이것이 바로 개발자에게 중요한 `기술 깊이`다
  - `내가 모른다는 사실조차 모르는 것`은 지식의 가장 많은 영역을 차지하며, 대부분 당면한 문제의 완벽한 정담임에도 불구하고 그 존재조차 알지 못한다

- 개발자에서 아키텍트로 전환할 때 주로 2가지 문제가 발생한다
  1.  다양한 분야에서 전문성을 유지하려다 실패한다
  2.  자신의 낡은 정보를 첨단으로 오해하는 그릇된 인식

## 2.3 트레이드오프 분석

> 아키텍처는 구글링해도 안 되는 것이다

> 아키텍처는 정답도, 오답도 없다. 오직 트레이드오프만 있을 뿐

> 프로그래머는 장점은 잘 알지만 트레이드오프는 하나도 모른다. 아키텍트는 둘 다 잘 알아야 한다
>
> - 리치 히키 Rich Hickey (Clojure 언어 창시자)

- 아키텍트 사고란 기술 여부와 상관 없이 모든 솔루션의 트레이드오프를 분석하여 최선의 셜정을 하는 것이다
- 아키텍트는 "경우에 따라 다릅니다"라고 밖에 말할 수 없다, 모든 아키텍처는 저마다의 환경과 상황, 문제를 안고 있기 때문이다
- 아키텍처 사고는 어떤 솔루션의 장점과 단점을 분석한다
- 모든 솔루션의 장점과 단점, 비즈니스 동인, 환경 등 다양한 팩터를 고려한 후에야 그중 가장 나은 솔루션을 선택할 수 있게 된다

## 2.4 비즈니스 동인의 이해

- 아키텍트 사고는 성공적인 시스템 구축에 필요한 비즈니스 동인을 이해하고 요구사항을 아키텍처 특성으로 해석하는 것이다

## 2.5 아키텍처와 코딩 실무 간 균형 맞추기

- 모든 아키텍트는 프로그래밍을 지속하며 어느 정도의 기술 깊이를 유지해야 한다

- 개발 실무와 아키텍처 균형을 맞추는 팁

  1. 아키텍트가 프로젝트 개발 파트의 코어 부분을 담당하지 않는다
     아키텍트는 풀타임 개발자가 아니므로 개발자와 아키텍트 역할의 균형을 잘 맞춰야하기에, 코어를 제외한 비즈니스 기능 위주의 작업을 집중하는 것이 좋다
  2. 코드 리뷰를 자주 한다
     코드 리뷰를 통해 아키텍처 컴플라이언스를 보장할 수 있고, 일반적으로 아키텍트가 개발 팀원보다 경력이 많아 코칭 혹은 멘토링 등 도움이 되는 경우가 많다

- 아키텍트가 개발을 함께 할 경우 생기는 이점

  1. 프로덕션(운영계) 코드를 실제로 관여하여 실무 경험이 쌓인다
  2. 개발팀에서 작업중에 겪는 프로세스, 절차, 개발 환경 등 pain point를 알 수 있다

- 실무를 할수 없는 아키텍트는 다음과 같은 방식을 시도해볼 수 있다
  1. 개념 증명(POC, Proof of concept)을 직접 작성하는 것
  - 구현 상세를 고민할 수 있고, 이는 아키텍처 결정 검증에 유용하다
  - 가능한한 프로덕션 수준의 고품질 코드를 작성하자, 아키텍트가 작성한 POC 코드가 저장소에 올라가면 외려 이것이 레퍼런스 아키텍처가 되는 경우가 많다
  2. 유저 스토리 작업같이 중요한 것은 개발팀에게 맡기고 비교적 우선순위가 낮은 기술 부채 스토리나 아키텍처 스토리에 전념한다
  3. 이터레이션을 하며 디버그한다, 이 과정에서 코드베이스에 존재하는 이슈나 약점을 발견할 수 있다
  4. 커맨드라인 도구나 분석기를 만들어 개발팀의 업무를 간소화/자동화 한다
  5. 아키텍처의 컴플라이언스를 보장하기 위한 피트니스 함수를 작성한다
